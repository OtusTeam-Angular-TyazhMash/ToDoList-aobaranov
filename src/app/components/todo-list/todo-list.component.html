<h1 class="todo-list-header">ToDo List</h1>
<div class="filters-container" [hidden]="!isItemCardShowing()">
    <ng-container *ngFor="let filter of getFilters()">
        <div [class]="filter.type">
            <span>{{ filter.name }}:</span>
            <ul *ngFor="let value of filter.values">
                <li>
                    <app-button 
                        class="filter-item"
                        styleType="transparent"
                        [checked]="filter.selectedValues.includes(value)"
                        (clicked)="onFilterItemClick(filter, value)">
                        {{ value }}
                    </app-button> 
                </li>
            </ul>
        </div>
    </ng-container>
</div>
<ul class="todo-container" [hidden]="!isItemCardShowing()">
    <li *ngFor="let item of getFilteredItems()" 
        [tooltip]="item.description || item.text"
        [tooltipDelay]="3000"
        class="todo-item" 
        tabindex="0"
        [class.selected]="isItemSelected(item.id)"
        (click)="onClickItem(item.id)"
        (dblclick)="onDblClickItem(item.id)"
        (keydown.space)="onClickItem(item.id)"
        (keydown.control.space)="onDblClickItem(item.id)"
        (keydown.esc)="onCancelEditItem(item.id)">
        <app-todo-list-item 
            [data]="item" 
            [mode]="isItemEditing(item.id) ? 'edit' : 'view'"
            (edited)="onEditItem($event)"
            (deleted)="onDeleteItem($event)"
            (canceled)="onCancelEditItem($event)"/>
    </li>
</ul>
<app-todo-create-item
    class="todo-item-input"
    [class.centered]="!isItemCardShowing()"/>
<div class="todo-card" [hidden]="!isItemCardShowing()">
    <ng-container *ngIf="selectedItemId !== null">
        <p class="todo-card-text">{{ selectedItem?.text }}</p>
        <p class="todo-card-description">{{ selectedItem?.description }}</p>
    </ng-container>
</div>
<app-loading-spinner *ngIf="isLoading"/>